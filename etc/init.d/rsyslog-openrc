#!/sbin/openrc-run

description="Rsyslog is an enhanced multi-threaded syslogd"
description_start="Starting enhanced syslogd"
description_stop="Stopping enhanced syslogd"

DAEMON=/usr/sbin/rsyslogd
PIDFILE=/run/rsyslogd.pid

depend() {
    need mountall
    after bootmisc
}

start() {
    ebegin "${description_start}"
    create_xconsole
    start-stop-daemon --start --quiet --pidfile ${PIDFILE} --exec ${DAEMON} -- ${RSYSLOGD_OPTIONS}
    sendsigs_omit
    eend $?
}

stop() {
    ebegin "${description_stop}"
    start-stop-daemon --stop --quiet --retry=TERM/30/KILL/5 --pidfile ${PIDFILE} --exec ${DAEMON}
    eend $?
}
